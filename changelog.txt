 *
 * Index Scan module
 *
 * Use this module to scan your web folders for missing index files. If any found
 * you can create automaticly.
 *
 * The module uses a function to scan for files originally found on php.net examples
 * but modified to suit the needs / standards of xoops 2.3.3 & php5.
 *
 * LICENSE
 *
 * You may not change or alter any portion of this comment or credits
 * of supporting developers from this source code or any supporting source code
 * which is considered copyrighted (c) material of the original comment or credit authors.
 *
 * @copyright   The XOOPS Project http://sourceforge.net/projects/xoops/
 * @license       http://www.fsf.org/copyleft/gpl.html GNU public license
 * @author       Michael Albertsen (culex) <http://www.culex.dk>
 * @version      $Id:readme.txt 2009-11-29 23:55 culex $
 * @since         File available since Release 1.0.0
 *
 
 Index scan
 ----------
 v1.0 Thursdag 9 july 2009 - 17:08 (GMT +1)

- Changed function to create index.html, as it ignored index.php3. Now working
 
 V1.0 Saturday 5 September 2009 - 14.00 (gmt +1)

- Added Persian Language to the module // Thanks to Voltan
- Descided to let the module go official. No errors or conserns has been reported during testing.


 V1.0 Saturday 7 September 2009 - 15.55 (gmt +1)

- Added French Language to the module // Thanks to kris_fr
- Added this line in language/modinfo.php -- // Thanks CJ
	define("_MI_INDEXSCAN_CREATEINDEX", "Create index files");

 V1.0 Saturday 12 September 2009 - 10.00 (gmt +1)
 - Added dutch translation thanks to Reintjan

IndexScan version 1.1
---------------------

V1.1 Wednesday 16 September 2009 - 13:30 (gmt +1)

- Added the ability to scan for use of Ifram in indexfiles // Credit to Ghia for this Idea
- Added Spanish translation // Thanks to DonCurioso at hispaxoops.com

v1.1 thursday 17 september 2009 - 21:00 (gmt +1)

- Indexscan included words with (header, mainfile and footer) in the iframe injection scan.

v1.1 Friday 02 October 2009 - 21:30 (gmt +1)
- Changed xoops_version.php to show the correct release number 1.1 (thanks to Burning)
- Added a new and very cool logo for indexscan (million thanks again to Burning)

IndexScan version 2.0
---------------------

v2.0 friday 27 november 2009 - 13:28 (gmt +1)

- Added searchword "fromCharCode" to search word in iframe scan, to look for encoded javascript includes
- Spiced the scanning up with some highlighting javascript + some jquery for the scan and messages with lazy load
- Excluded the modules/indexscan from the iframe scan. The description and functions contain multible iframe-words and thus always gets caught in the scan.
- new translations definitions in  admin.php are

// Added in 2.00
define("_AM_INDEXSCAN_CHECKFORFILES","<tr class='header'><center><h2>Checking files for IFRAME Infection</h2></tr></center><center><small>Not that not all uses of Ifram is injections.<br>Check the code in the files found before you delete.<br><hr></small></center>");
define("_AM_INDEXSCAN_UNABLETOREADFILE","Unable to open file ");
define("_AM_INDEXSCAN_INFECTED","!!Word IFRAME found!!");
define("_AM_INDEXSCAN_CLEAN","OK");
define("_AM_INDEXSCAN_INJECTIONSCAN","Scan for ifram injections");

//added in 2.01
define("_AM_INDEXSCAN_SCANNING4MISS","<br>Looking for missin index files.<br>Please wait.");
define("_AM_INDEXSCAN_CREATINGMISS","<br>Creating missing index files.<br>Please wait.");
define("_AM_INDEXSCAN_SCANNING4IFRAME","<br>Looking for iframes and encoded javascript.<br>Please wait.");

	Default english translations have been added in all language files. Feel free to send me in your language so I can change to correct language.
	
//added in 2.02

- Added the option in config to change the base of the starting point for the scans. To avoid users - having xoops_data, xoops_lib outside of the root, not having all folders scanned.
- Added a function to get the $xoopsModuleConfig (root) where global $xoopsModuleConfig not working in admin.
- New language defines are.:
//Added in 2.02
define("_MI_INDEXSCAN_ROOTORSUB","Root or sub folder installation");
define("_MI_INDEXSCAN_ROOTORSUB_DESC","Write here from where you want to start scanning<br/>'../../../' if your web is like 'www.myspace.com/mainfile,php'<br/>'../../../../' if it is like www.websted.dk/htdocs/mainfile.com");

IndexScan version 2.03
---------------------

v2.1 Monday 18 January 2010 - 18:50 (gmt +1)

- Added possibility to check files in webfolders against xoops check file and filter from Config. Filter separates extensions of files presumed to be ok.
- Files found in check files marked red are presumed not to be part of Xoops, and can be deleted by the 'delete icon' using ajax + jquery avoid reloading the page.
- Added the PclZip.Class to create zip file on the fly for users not having php > 5.20. 
- Scan to create back up from the folders residing in the admin/folder2backup. The scan creates a copy of the empty folders, existing index.html, index.php, index.htm files, delete all other files, creates new indexfiles, and create link to download as zip. Handy when working with developing and want to create a zip with nothing but index files.  
	I tested with htdoc from Xoops 2.4.4 in a Wamp, creation time is aprox. 2 minutes. Not tested in real server yet, but time must be considerble.
- New language defines are

(modinfo.php)

//Added in 2.03
define ("_MI_INDEXSCAN_ILLEGALFILETYPES", "Skip file types.");
define("_MI_INDEXSCAN_ILLEGALFILETYPES_DESC","Add files you wish to skip while 'checking files'.<br/>These files will be considered 'safe'<br/>if they also are listed in the file 'admin/filecheck.txt'.");
define("_MI_INDEXSCAN_FROMBACKUP", "Create file zip");
define ("_MI_INDEXSCAN_FROMBACKUP_DESC", "Creates a zip archieve with same folder structure from the folder you ftp to folder2backup.<br/>The zip contains nothing but the folders and,<br/>index.html files where missing from<br/>your uploaded folder.<br/><br/>The folder name is the name of the folder in your folder2backup folder, for instance 'testing'.<br/>You can delete 'testing' this folder is only for example.");

(admin.php)

// Added in 2.03

define ("_AM_INDEXSCAN_CHECKILLEGALFILES","Check files");
define ("_AM_INDEXSCAN_SCANNING4ILLEGALFILES", "Scanning web files");
define("_AM_INDEXSCAN_MAYBEOK", "Looks to be ok");
define ("_AM_INDEXSCAN_NOTINXOOPSINSTALL", "Not Xoops file");
define ("_AM_INDEXSCAN_FINISDILLEGAL", " files found that are not Xoops files. Total files scanned: ");
define ("_AM_INDEXSCAN_ILLEGAL_DESC", "The file found Not to be Xoops files, are checked against checkfile.txt in admin folder, and agains files in config defined as allowed file types.<br/>These files could be unwanted tmp, thumbs.db, or info files.<br/>If you you dont need these files add them to automaticly delete in config and they will be deleted when you run this scan next time.");
define ("_AM_INDEXSCAN_REALLYDELETE", "Are you sure ?, delete file.: ");
define("_AM_INDEXSCAN_CREATEZIP", "Create zip file for download");
define("_AM_INDEXSCAN_CREATINGZIP", "Creating backup with empty folders<br/>plus index files.<br/>");
define("_AM_INDEXSCAN_BACKEDUPDELETEDFROMBACKUP", "Deleted files in folder from backup except index.html files");
define("_AM_INDEXSCAN_BACKEDUP2", "Backed up folder.: ");
define("_AM_INDEXSCAN_DOWNLOADZIP", "Download index files zip");
define("_AM_INDEXSCAN_CREATINGZIPFORDOWNLOAD", "Creating zip file for download");
define("_AM_INDEXSCAN_CREATEDINDEXINBACKUP", "Created index file in backup folder");
define("_AM_INDEXSCAN_CLEANUPDONE", "Cleaning up...Done!");
define("_AM_INDEXSCAN_FILESARECOPIED", " Files were copied to backup folder");
define("_AM_INDEXSCAN_FILESDELETED", " Files were deleted from backup folder again");
define("_AM_INDEXSCAN_FILESCREATED", " Index.html files were created in backupfolder");
